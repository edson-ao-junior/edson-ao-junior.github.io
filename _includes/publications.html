<link rel="stylesheet" href="assets/css/customs.css">

{% assign pubs = site.data.publications | sort: "year" | reverse %}
{% assign years = pubs | map: "year" | uniq %}

{% for y in years %}
  <h1>{{ y }}</h1>

  {% assign pubs_year = pubs | where: "year", y %}

  {% assign journals = pubs_year | where: "type", "journal" %}
  {% if journals.size > 0 %}
    <h2>Journal Articles</h2>
    <ul class="publication-list">
      {% for pub in journals %}
        <li>
          {{ pub.authors }}.
          <strong>{{ pub.title }}</strong>.
          <em>{{ pub.venue }}</em>.
          {% if pub.doi %}
            {% if pub.doi != "DOI" %}
              <a href="https://doi.org/{{ pub.doi }}"
                target="_blank"
                rel="noopener noreferrer"
                class="doi-link"
                title="View DOI">
                <img src="{{ 'assets/img/doi.svg' | relative_url }}"
                    alt="DOI"
                    class="doi-icon">
              </a>
            {% else %}
              <span class="doi-text">DOI</span>.
            {% endif %}
          {% else %}
            <span class="doi-text">DOI</span>.
          {% endif %}
          {% if pub.language == "pt" %}
            <span title="Publication in Portuguese">ðŸ‡§ðŸ‡·</span>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  {% assign confs = pubs_year | where: "type", "conference" %}
  {% if confs.size > 0 %}
    <h2>Conference & Workshop Papers</h2>
    <ul class="publication-list">
      {% for pub in confs %}
        <li>
          {{ pub.authors }}.
          <strong>{{ pub.title }}</strong>.
          <em>{{ pub.venue }}</em>.
          {% if pub.doi %}
            {% if pub.doi != "DOI" %}
              <a href="https://doi.org/{{ pub.doi }}"
                 target="_blank"
                 rel="noopener noreferrer"
                 class="doi-link"
                 title="View DOI">
                <img src="https://www.doi.org/images/doi_logo.svg"
                     alt="DOI"
                     class="doi-icon">
              </a>.
            {% else %}
              <span class="doi-text">DOI</span>.
            {% endif %}
          {% else %}
            <span class="doi-text">DOI</span>.
          {% endif %}
          {% if pub.language == "pt" %}
            <span title="Publication in Portuguese">ðŸ‡§ðŸ‡·</span>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% endif %}

{% endfor %}
